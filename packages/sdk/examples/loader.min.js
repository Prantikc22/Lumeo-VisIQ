"use strict";var visitoriq=(()=>{(function(){"use strict";var i=window,o=document,c=o.currentScript,a=c?.getAttribute("data-sitekey")||"",s=(c?.getAttribute("data-api-base")||"https://api.yourdomain.com/api").replace(/\/+$/,"");if(!a){console.warn("[VisitorIQ] Missing data-sitekey on loader <script>");return}function m(t){try{let e=new URL(t);return e.pathname=e.pathname.replace(/[^/]+$/,""),e.origin+e.pathname}catch{return""}}var f=m(c&&c.src||""),d=f+"index.min.js",h="https://cdn.jsdelivr.net/npm/@thumbmarkjs/thumbmarkjs/dist/thumbmark.umd.js",p="https://openfpcdn.io/botd/v1";function u(t){return new Promise(function(e,n){var r=o.createElement("script");r.src=t,r.async=!0,r.crossOrigin="anonymous",r.onload=function(){e()},r.onerror=function(){n(new Error("load error: "+t))},o.head.appendChild(r)})}function b(t){var e=o.createElement("div");e.style.cssText="position:fixed;inset:0;z-index:2147483647;background:#0b0b0be6;color:#fff;display:flex;align-items:center;justify-content:center;padding:24px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:18px;text-align:center;",e.textContent=t||"Access denied: Your device is blocked.",o.documentElement.appendChild(e),o.documentElement.style.overflow="hidden"}function y(){if(i.ThumbmarkJS&&i.ThumbmarkJS.Thumbmark)try{return new i.ThumbmarkJS.Thumbmark().get()}catch{}return u(h).then(function(){try{return new i.ThumbmarkJS.Thumbmark().get()}catch{return{thumbmark:""}}})}function k(t){var e=s+"/blocks?siteKey="+encodeURIComponent(a)+"&fp="+encodeURIComponent(t||"");return fetch(e,{method:"GET",mode:"cors",headers:{"x-usage-track":"true"}}).then(function(n){return n.ok?n.json():null}).then(function(n){return n?typeof n.blocked=="boolean"?n.blocked:Array.isArray(n.blocks)?!!n.blocks.some(function(r){return r&&r.value===t}):!1:!1}).catch(function(){return!1})}function v(){if(i.Botd)try{return i.Botd.load().then(t=>t.detect())}catch{return Promise.resolve(null)}return u(p).then(function(){try{return i.Botd.load().then(t=>t.detect())}catch{return null}}).catch(function(){return null})}function l(){Promise.resolve().then(y).then(function(t){var e=t&&t.thumbmark||"";return k(e).then(function(n){return n?(b("Access denied: Your device is blocked."),null):v().then(function(r){return{botd:r}})})}).then(function(t){if(t)return u(d).then(function(){i.visitoriq&&typeof i.visitoriq.init=="function"?i.visitoriq.init({siteKey:a,endpoint:s+"/collect-visitor",botd_result:t.botd}):console.warn("[VisitorIQ] visitoriq.init missing. Check index.min.js path:",d)})}).catch(function(){})}o.readyState==="loading"?o.addEventListener("DOMContentLoaded",l):l()})();})();
//# sourceMappingURL=loader.min.js.map